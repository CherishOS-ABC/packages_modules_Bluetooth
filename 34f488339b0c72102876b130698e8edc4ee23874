{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7ce83e03_e903506f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 29578
      },
      "writtenOn": "2023-12-23T00:26:05Z",
      "side": 1,
      "message": "This fixes BT on LGE SM8150 when GAPPs are installed.\nCrash:\n```\n12-21 20:07:00.515  6819  6819 F DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\n12-21 20:07:00.515  6819  6819 F DEBUG   : LineageOS Version: \u002720.0-20231222-UNOFFICIAL-mh2lm\u0027\n12-21 20:07:00.515  6819  6819 F DEBUG   : Build fingerprint: \u0027lge/mh2lm/mh2lm:12/SKQ1.211103.001/8150120221001:user/release-keys\u0027\n12-21 20:07:00.515  6819  6819 F DEBUG   : Revision: \u002712\u0027\n12-21 20:07:00.515  6819  6819 F DEBUG   : ABI: \u0027arm64\u0027\n12-21 20:07:00.515  6819  6819 F DEBUG   : Timestamp: 2023-12-21 20:07:00.305792446-0800\n12-21 20:07:00.515  6819  6819 F DEBUG   : Process uptime: 0s\n12-21 20:07:00.515  6819  6819 F DEBUG   : Cmdline: com.android.bluetooth\n12-21 20:07:00.515  6819  6819 F DEBUG   : pid: 6718, tid: 6758, name: BluetoothScanMa  \u003e\u003e\u003e com.android.bluetooth \u003c\u003c\u003c\n12-21 20:07:00.515  6819  6819 F DEBUG   : uid: 1002\n12-21 20:07:00.515  6819  6819 F DEBUG   : signal 6 (SIGABRT), code -1 (SI_QUEUE), fault addr --------\n12-21 20:07:00.515  6819  6819 F DEBUG   : Abort message: \u0027JNI DETECTED ERROR IN APPLICATION: attempt to access field int com.android.bluetooth.gatt.ScanFilterQueue$Entry.ad_type of type int with the wrong type byte: 0x769d337bfc\n12-21 20:07:00.515  6819  6819 F DEBUG   :     in call to GetByteField\n12-21 20:07:00.515  6819  6819 F DEBUG   :     from void com.android.bluetooth.gatt.ScanManager$ScanNative.gattClientScanFilterAddNative(int, com.android.bluetooth.gatt.ScanFilterQueue$Entry[], int)\u0027\n12-21 20:07:00.515  6819  6819 F DEBUG   :     x0  0000000000000000  x1  0000000000001a66  x2  0000000000000006  x3  000000762f89a990\n12-21 20:07:00.515  6819  6819 F DEBUG   :     x4  00000079766f8000  x5  00000079766f8000  x6  00000079766f8000  x7  0000000000042500\n12-21 20:07:00.515  6819  6819 F DEBUG   :     x8  00000000000000f0  x9  000000795f91fa00  x10 0000000000000001  x11 000000795f95ddd4\n12-21 20:07:00.515  6819  6819 F DEBUG   :     x12 0000000000006eb2  x13 0000000000000193  x14 000000762f899790  x15 00009c71d869aa59\n12-21 20:07:00.515  6819  6819 F DEBUG   :     x16 000000795f9c2d58  x17 000000795f99fc40  x18 000000762f782008  x19 0000000000001a3e\n12-21 20:07:00.515  6819  6819 F DEBUG   :     x20 0000000000001a66  x21 00000000ffffffff  x22 0000000000000000  x23 0000000000000000\n12-21 20:07:00.515  6819  6819 F DEBUG   :     x24 000000762f89ab48  x25 00000076a322ca90  x26 000000762f89ab60  x27 000000762f89c000\n12-21 20:07:00.515  6819  6819 F DEBUG   :     x28 00000076bfd7f260  x29 000000762f89aa10\n12-21 20:07:00.515  6819  6819 F DEBUG   :     lr  000000795f94f958  sp  000000762f89a970  pc  000000795f94f984  pst 0000000000000000\n12-21 20:07:00.515  6819  6819 F DEBUG   : backtrace:\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #00 pc 0000000000051984  /apex/com.android.runtime/lib64/bionic/libc.so (abort+164) (BuildId: f73b4091a9c819a21763f5bf11b53c2b)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #01 pc 0000000000725abc  /apex/com.android.art/lib64/libartd.so (art::Runtime::Abort(char const*)+372) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #02 pc 0000000000016ea8  /apex/com.android.art/lib64/libbase.so (android::base::SetAborter(std::__1::function\u003cvoid (char const*)\u003e\u0026\u0026)::$_3::__invoke(char const*)+80) (BuildId: b77c57f68a484ed93d5a7eda59d83bf9)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #03 pc 0000000000016450  /apex/com.android.art/lib64/libbase.so (android::base::LogMessage::~LogMessage()+352) (BuildId: b77c57f68a484ed93d5a7eda59d83bf9)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #04 pc 00000000005591ec  /apex/com.android.art/lib64/libartd.so (art::JavaVMExt::JniAbort(char const*, char const*)+952) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #05 pc 0000000000559328  /apex/com.android.art/lib64/libartd.so (art::JavaVMExt::JniAbortV(char const*, char const*, std::__va_list)+108) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #06 pc 000000000054f274  /apex/com.android.art/lib64/libartd.so (art::(anonymous namespace)::ScopedCheck::AbortF(char const*, ...)+148) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #07 pc 0000000000554838  /apex/com.android.art/lib64/libartd.so (art::(anonymous namespace)::ScopedCheck::CheckFieldAccess(art::ScopedObjectAccess\u0026, _jobject*, _jfieldID*, bool, art::Primitive::Type)+1832) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #08 pc 0000000000553e6c  /apex/com.android.art/lib64/libartd.so (art::(anonymous namespace)::CheckJNI::GetField(char const*, _JNIEnv*, _jobject*, _jfieldID*, bool, art::Primitive::Type)+236) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #09 pc 0000000000548104  /apex/com.android.art/lib64/libartd.so (art::(anonymous namespace)::CheckJNI::GetByteField(_JNIEnv*, _jobject*, _jfieldID*)+36) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #10 pc 000000000035e488  /apex/com.android.btservices/lib64/libbluetooth_jni.so (android::gattClientScanFilterAddNative(_JNIEnv*, _jobject*, int, _jobjectArray*, int)+1928) (BuildId: 3748062822f4b56c65ac3d77bcb09d27)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #11 pc 0000000000862154  /apex/com.android.art/lib64/libartd.so (art_quick_generic_jni_trampoline+148) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #12 pc 00000000008500b0  /apex/com.android.art/lib64/libartd.so (nterp_helper+4016) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #13 pc 000000000011d2f2  /apex/com.android.btservices/app/Bluetooth@TQ3A.230901.001/Bluetooth.apk (com.android.bluetooth.gatt.ScanManager$ScanNative.configureScanFilters+246)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #14 pc 0000000000850054  /apex/com.android.art/lib64/libartd.so (nterp_helper+3924) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #15 pc 000000000011d9e6  /apex/com.android.btservices/app/Bluetooth@TQ3A.230901.001/Bluetooth.apk (com.android.bluetooth.gatt.ScanManager$ScanNative.startRegularScan+70)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #16 pc 0000000000850054  /apex/com.android.art/lib64/libartd.so (nterp_helper+3924) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #17 pc 000000000011bdf8  /apex/com.android.btservices/app/Bluetooth@TQ3A.230901.001/Bluetooth.apk (com.android.bluetooth.gatt.ScanManager$ClientHandler.handleStartScan+416)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #18 pc 0000000000850054  /apex/com.android.art/lib64/libartd.so (nterp_helper+3924) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #19 pc 000000000011ba78  /apex/com.android.btservices/app/Bluetooth@TQ3A.230901.001/Bluetooth.apk (com.android.bluetooth.gatt.ScanManager$ClientHandler.handleMessage+196)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #20 pc 00000000004eb5b0  /system/framework/arm64/boot-framework.oat (android.os.Handler.dispatchMessage+192) (BuildId: 8f5caf9053821efff9292cabef65b8625826e2ad)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #21 pc 00000000004ee8e8  /system/framework/arm64/boot-framework.oat (android.os.Looper.loopOnce+1032) (BuildId: 8f5caf9053821efff9292cabef65b8625826e2ad)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #22 pc 00000000004ee440  /system/framework/arm64/boot-framework.oat (android.os.Looper.loop+560) (BuildId: 8f5caf9053821efff9292cabef65b8625826e2ad)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #23 pc 00000000004ed654  /system/framework/arm64/boot-framework.oat (android.os.HandlerThread.run+580) (BuildId: 8f5caf9053821efff9292cabef65b8625826e2ad)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #24 pc 000000000085876c  /apex/com.android.art/lib64/libartd.so (art_quick_invoke_stub+556) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #25 pc 00000000001c999c  /apex/com.android.art/lib64/libartd.so (art::ArtMethod::Invoke(art::Thread*, unsigned int*, unsigned int, art::JValue*, char const*)+640) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #26 pc 000000000071c10c  /apex/com.android.art/lib64/libartd.so (art::JValue art::InvokeVirtualOrInterfaceWithJValues\u003cart::ArtMethod*\u003e(art::ScopedObjectAccessAlreadyRunnable const\u0026, _jobject*, art::ArtMethod*, jvalue const*)+376) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #27 pc 000000000071c638  /apex/com.android.art/lib64/libartd.so (art::JValue art::InvokeVirtualOrInterfaceWithJValues\u003c_jmethodID*\u003e(art::ScopedObjectAccessAlreadyRunnable const\u0026, _jobject*, _jmethodID*, jvalue const*)+104) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #28 pc 0000000000764938  /apex/com.android.art/lib64/libartd.so (art::Thread::CreateCallback(void*)+1004) (BuildId: 85974011f500153d03f1bd7f4d3efc64)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #29 pc 00000000000b6380  /apex/com.android.runtime/lib64/bionic/libc.so (__pthread_start(void*)+208) (BuildId: f73b4091a9c819a21763f5bf11b53c2b)\n12-21 20:07:00.515  6819  6819 F DEBUG   :       #30 pc 00000000000530a8  /apex/com.android.runtime/lib64/bionic/libc.so (__start_thread+64) (BuildId: f73b4091a9c819a21763f5bf11b53c2b)\n```",
      "revId": "34f488339b0c72102876b130698e8edc4ee23874",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    }
  ]
}